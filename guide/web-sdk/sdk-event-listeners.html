<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SDK Event Listeners | Documentation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/fun-wallet-docs/site-icon.svg">
    <link rel="manifest" href="/fun-wallet-docs/manifest.json">
    <link rel="apple-touch-icon" href="/fun-wallet-docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/fun-wallet-docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Welcome">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/fun-wallet-docs/assets/css/0.styles.c3a9366e.css" as="style"><link rel="preload" href="/fun-wallet-docs/assets/js/app.927459d6.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/2.7b9da207.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/42.25a76a54.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/5.ecad0ec5.js" as="script"><link rel="prefetch" href="/fun-wallet-docs/assets/js/10.62318c1d.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/11.ed678a7f.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/12.80cbc937.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/13.e83dfa06.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/14.1df09232.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/15.59caac8f.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/16.c2f3e048.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/17.5ca2cdcf.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/18.e41755ec.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/19.3e66782d.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/20.b8392d7a.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/21.3d830296.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/22.e5db1407.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/23.5fb76bd3.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/24.25d2cf07.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/25.7bcff97e.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/26.52352925.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/27.336467fd.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/28.4b44e3d5.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/29.66224cf1.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/3.28d81154.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/30.5f7f8353.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/31.8c685c9a.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/32.484be0cb.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/33.3fb08fd7.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/34.cc66e81a.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/35.a5c1ee08.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/36.e6daf07c.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/37.5bed192e.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/38.643444d7.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/39.c78f3112.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/4.2a1378ca.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/40.17e91f20.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/41.94a189e3.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/43.67b1ea43.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/44.914494b0.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/45.82f265af.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/46.bb34b84d.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/47.22437caa.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/48.15e4bba4.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/49.219061d5.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/50.083bd4f0.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/51.99dbde4a.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/52.3e643279.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/53.781ee33e.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/54.5c8f3f04.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/55.05edfe17.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/56.71c8e044.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/57.891f780c.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/6.8d3fee9f.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/7.1d7dad65.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/8.e75ecad1.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/9.3b8b4a6e.js">
    <link rel="stylesheet" href="/fun-wallet-docs/assets/css/0.styles.c3a9366e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fun-wallet-docs/" class="home-link router-link-active"><img src="/fun-wallet-docs/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fun-wallet-docs/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fun-wallet-docs/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/" class="sidebar-link">Introduction</a></li><li><a href="/fun-wallet-docs/guide/information/browser-support.html" class="sidebar-link">Browser Support</a></li><li><a href="/fun-wallet-docs/guide/information/testing.html" class="sidebar-link">Our Testing</a></li><li><a href="/fun-wallet-docs/guide/information/layouts.html" class="sidebar-link">Layouts</a></li><li><a href="/fun-wallet-docs/guide/information/branding.html" class="sidebar-link">Branding</a></li><li><a href="/fun-wallet-docs/guide/information/kyc.html" class="sidebar-link">KYC</a></li><li><a href="/fun-wallet-docs/guide/information/fiat-gateway.html" class="sidebar-link">Fiat Gateway</a></li><li><a href="/fun-wallet-docs/guide/information/approval-modal.html" class="sidebar-link">Approval Modals</a></li><li><a href="/fun-wallet-docs/guide/information/auto-resizing-iframes.html" class="sidebar-link">Auto-resizing of iframes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Web SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/web-sdk/live-demo.html" class="sidebar-link">Live demo</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/react.html" class="sidebar-link">Integrating with a react app</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/angular.html" class="sidebar-link">Integrating with a angular app</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/vue.html" class="sidebar-link">Integrating with a vue app</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/native-js-or-another-framework.html" class="sidebar-link">Integrating with native JS or another framework</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/routing.html" class="sidebar-link">Routing and Deep Linking</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/languages.html" class="sidebar-link">Languages</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/ethereum-provider.html" class="sidebar-link">Ethereum Provider</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/init.html" class="sidebar-link">SDK Methods Init</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/auth.html" class="sidebar-link">SDK Methods Authentication</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/eth.html" class="sidebar-link">SDK Methods Eth</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/networks.html" class="sidebar-link">SDK Methods Networks</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/tokens.html" class="sidebar-link">SDK Methods Tokens</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/currencies.html" class="sidebar-link">SDK Methods Currencies</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/follower.html" class="sidebar-link">SDK Methods Follower</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/kyc.html" class="sidebar-link">SDK Methods KYC</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/language.html" class="sidebar-link">SDK Methods Language</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/marketing.html" class="sidebar-link">SDK Methods Marketing</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/version-info.html" class="sidebar-link">SDK Methods Version Info</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html" class="active sidebar-link">SDK Event Listeners</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#registering-an-event-listener" class="sidebar-link">Registering an event listener</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#registering-a-one-off-listener" class="sidebar-link">Registering a one-off listener</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#event-listeners-response-formats" class="sidebar-link">Event listeners response formats</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#security-concerns" class="sidebar-link">Security Concerns</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#list-of-all-available-listeners" class="sidebar-link">List of All Available Listeners</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#restoreauthenticationcompleted" class="sidebar-link">restoreAuthenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#changenetwork" class="sidebar-link">changeNetwork</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#authenticationcompleted" class="sidebar-link">authenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#followerauthenticationcompleted" class="sidebar-link">followerAuthenticationCompleted</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#walletinactivityloggedout" class="sidebar-link">walletInactivityLoggedOut</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#walletdevicedeletedloggedout" class="sidebar-link">walletDeviceDeletedLoggedOut</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#pendingtransaction" class="sidebar-link">pendingTransaction</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#completedtransaction" class="sidebar-link">completedTransaction</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#transactionreplaced" class="sidebar-link">transactionReplaced</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#erc20tokenbalancechanged" class="sidebar-link">erc20TokenBalanceChanged</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#erc20tokenfiatpricechanged" class="sidebar-link">erc20TokenFiatPriceChanged</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#ethbalancechanged" class="sidebar-link">ethBalanceChanged</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#ethfiatpricechanged" class="sidebar-link">ethFiatPriceChanged</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#changecurrency" class="sidebar-link">changeCurrency</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#iskycverified" class="sidebar-link">isKycVerified</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#kycprocesscancelled" class="sidebar-link">kycProcessCancelled</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#websocketconnected" class="sidebar-link">websocketConnected</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#websocketdisconnected" class="sidebar-link">websocketDisconnected</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#newblock" class="sidebar-link">newBlock</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#playerprotectionupdated" class="sidebar-link">playerProtectionUpdated</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#wallettracking" class="sidebar-link">walletTracking</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#authenticationpopupclosed" class="sidebar-link">authenticationPopUpClosed</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html#cancelling-event-listeners" class="sidebar-link">Cancelling event listeners</a></li></ul></li><li><a href="/fun-wallet-docs/guide/web-sdk/block-listener.html" class="sidebar-link">Block listener</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Server &gt; Server API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/server-to-server-api/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/user-information.html" class="sidebar-link">User information</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/encrypted-user-information.html" class="sidebar-link">Encrypted user information</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>How Does It Work?</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-authentication-works.html" class="sidebar-link">How Authentication Works</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/registration.html" class="sidebar-link">Registration</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/login-and-recovery-token-generation.html" class="sidebar-link">Login and Recovery Token Generation</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/recovery.html" class="sidebar-link">Recovery</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/re-authentication.html" class="sidebar-link">Re-authentication</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-is-the-authentication-secure.html" class="sidebar-link">How is the Authentication Secure?</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-popup-authenticates-leader.html" class="sidebar-link">How the Authenticated Popup Authenticates the Leader</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/leader-and-follower-communication.html" class="sidebar-link">Leader and Follower Communication</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-broadcast-works.html" class="sidebar-link">How Broadcast Works</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/fun-wallet-sdk.html" class="sidebar-link">FunFair Wallet SDK</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/fun-wallet-ethereum-provider.html" class="sidebar-link">FunFair Wallet Ethereum Provider</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/blooms.html" class="sidebar-link">Blooms</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sdk-event-listeners"><a href="#sdk-event-listeners" class="header-anchor">#</a> SDK Event Listeners</h1> <p>The Wallet emits events when properties change, for example, when the authenticated user changes their network. Events allow your dApp to keep in sync. You can hook onto event listeners via methods exposed in the SDK, writing your own handling logic that you want to fire when the event is received.</p> <p>You can only register one event listener per message listener - if you do try to listen to a listener which has already been registered, it will throw a error. You can cancel listeners as necessary, and you'll then be able to register them again without an error being thrown.</p> <p>The SDK exposes two different ways to register an event listener:</p> <ol><li>Event listeners: listen to all events of a specified type until the listener is cancelled explicitly.</li> <li>One-off listeners: subscribe only to the first event of a specified type. Once the event has fired, your dApp will be unsubscribed and will receive no further events of the type. An example use case of a one-off listener might be when your dApp wants to update its state based on the next block mined, but isn't interested in subsequent changes to the blockchain.</li></ol> <p>Once the SDK is initialized, you should hook onto all the event listeners, as each one is important to the integration. We recommend that the callback you write for each message listener is just a simple state change to your Redux store, allowing that state change to be reflected in your UI components. Reactive programming (e.g. RxJS) will simplify the integration, and while it's not required (the SDK itself doesn't impose any constraints on this), it is our recommended integration approach for a clean solution.</p> <h2 id="registering-an-event-listener"><a href="#registering-an-event-listener" class="header-anchor">#</a> Registering an event listener</h2> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  TStronglyTypedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token comment">// `TStronglyTypedResponse` is a reference to a strongly-typed model.</span>
<span class="token comment">//  obviously don't use this in your application, import the correct response</span>
<span class="token comment">// model from `@funfair-tech/wallet-sdk`</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// your event-handling logic here</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your event-handling logic here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <h2 id="registering-a-one-off-listener"><a href="#registering-a-one-off-listener" class="header-anchor">#</a> Registering a one-off listener</h2> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  TStronglyTypedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token comment">// `TStronglyTypedResponse` is a reference to a strongly-typed model.</span>
<span class="token comment">//  obviously don't use this in your application, import the correct response</span>
<span class="token comment">// model from `@funfair-tech/wallet-sdk`</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">once</span><span class="token generic class-name"><span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// your event-handling logic here</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your event-handling logic here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <h2 id="event-listeners-response-formats"><a href="#event-listeners-response-formats" class="header-anchor">#</a> Event listeners response formats</h2> <p>Results are returned to the listener as follows:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  data<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">,</span>
  origin<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  source<span class="token operator">:</span> Window
<span class="token punctuation">}</span>
</code></pre></div><p>This is the result of the <code>postMessage</code> operation performed by the SDK.</p> <p>As well as indicating the origin and the source of the received data, the returned result will always have a <em>data</em> property which specifies the data for the event being received.</p> <p><code>data</code>
The object passed from the other window.</p> <p><code>origin</code>
The origin of the window that sent the message at the time <code>postMessage</code> was called. This string is the concatenation of the protocol and <code>&quot;://&quot;</code>, the host name if one exists, and <code>&quot;:&quot;</code> followed by a port number if a port is present and differs from the default port for the given protocol. Examples of typical origins are https://example.org/ (implying port 443), http://example.net/ (implying port 80), and http://example.com:8080/. The origin will always put the <code>/</code> at the end so make sure you include that in your compare.</p> <p>Note that this origin is not guaranteed to be the current or future origin of that window, which might have been navigated to a different location since postMessage was called.</p> <p>You should always check that its <code>https://wallet.funfair.io/</code> sending the post messages to be sure its came from us.</p> <p><code>source</code>
A reference to the window object that sent the message. You can use this to establish two-way communication between two windows with different origins.</p> <h2 id="security-concerns"><a href="#security-concerns" class="header-anchor">#</a> Security Concerns</h2> <p>ðŸ’¡ Always verify the sender's identity using the origin and possibly source properties. Any window (including, for example, http://evil.example.com) can send a message to any other window, and you have no guarantee that an unknown sender will not send malicious messages. Having verified identity, however, you still should always verify the syntax of the received message. Otherwise, a security hole in the site you trusted to send only trusted messages could then open a cross-site scripting hole in your site.</p> <p>ðŸ’¡ To protect your dApp's users from cross-site scripting attacks, make sure you <strong>NEVER</strong> assign the <em>data</em> result from the <code>postMessage</code> to any HTML elements:</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// OUCH!! YOU HAVE OPENED YOURSELF UP FOR THE TRUSTED DOMAINS TO</span>
    <span class="token comment">// INJECT BAD SCRIPTS INTO YOUR PAGE. AS RULE OF THUMB, NEVER, *EVER*</span>
    <span class="token comment">// DO THIS (DON'T WORRY WE WOULD NEVER DO SOMETHING SO MEAN :D)</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Always specify an exact target origin, not &quot;*&quot;, when you use <code>postMessage</code> to send data to other windows. A malicious site can change the location of the window without your knowledge, and therefore it can intercept the data sent using <code>postMessage</code>.</p> <p>Please note the SDK does check this as well and only connects messages from the Wallet but as the SDK is hosted on your side and exported globally on the window we suggest you check the origin as well. The messages the Wallet sends you are just information based anyway, we never register a event which says &quot;go and execute this script on the parent site&quot; so this makes it a lot less to worry about but we still suggest you abide by the security concerns addressed. If you fail to check this you can not be sure that the message has came from the Wallet.</p> <h2 id="list-of-all-available-listeners"><a href="#list-of-all-available-listeners" class="header-anchor">#</a> List of All Available Listeners</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  restoreAuthenticationCompleted <span class="token operator">=</span> <span class="token string">'restoreAuthenticationCompleted'</span><span class="token punctuation">,</span>
  changeNetwork <span class="token operator">=</span> <span class="token string">'changeNetwork'</span><span class="token punctuation">,</span>
  authenticationCompleted <span class="token operator">=</span> <span class="token string">'authenticationCompleted'</span><span class="token punctuation">,</span>
  followerAuthenticationCompleted <span class="token operator">=</span> <span class="token string">'followerAuthenticationCompleted'</span><span class="token punctuation">,</span>
  walletInactivityLoggedOut <span class="token operator">=</span> <span class="token string">'walletInactivityLoggedOut'</span><span class="token punctuation">,</span>
  walletDeviceDeletedLoggedOut <span class="token operator">=</span> <span class="token string">'walletDeviceDeletedLoggedOut'</span><span class="token punctuation">,</span>
  pendingTransaction <span class="token operator">=</span> <span class="token string">'pendingTransaction'</span><span class="token punctuation">,</span>
  completedTransaction <span class="token operator">=</span> <span class="token string">'completedTransaction'</span><span class="token punctuation">,</span>
  erc20TokenBalanceChanged <span class="token operator">=</span> <span class="token string">'erc20TokenBalanceChanged'</span><span class="token punctuation">,</span>
  erc20TokenFiatPriceChanged <span class="token operator">=</span> <span class="token string">'erc20TokenFiatPriceChanged'</span><span class="token punctuation">,</span>
  ethBalanceChanged <span class="token operator">=</span> <span class="token string">'ethBalanceChanged'</span><span class="token punctuation">,</span>
  ethFiatPriceChanged <span class="token operator">=</span> <span class="token string">'ethFiatPriceChanged'</span><span class="token punctuation">,</span>
  changeCurrency <span class="token operator">=</span> <span class="token string">'changeCurrency'</span><span class="token punctuation">,</span>
  isKycVerified <span class="token operator">=</span> <span class="token string">'isKycVerified'</span><span class="token punctuation">,</span>
  kycProcessCancelled <span class="token operator">=</span> <span class="token string">'kycProcessCancelled'</span><span class="token punctuation">,</span>
  websocketConnected <span class="token operator">=</span> <span class="token string">'websocketConnected'</span><span class="token punctuation">,</span>
  websocketDisconnected <span class="token operator">=</span> <span class="token string">'websocketDisconnected'</span><span class="token punctuation">,</span>
  newBlock <span class="token operator">=</span> <span class="token string">'newBlock'</span><span class="token punctuation">,</span>
  playerProtectionUpdated <span class="token operator">=</span> <span class="token string">'playerProtectionUpdated'</span><span class="token punctuation">,</span>
  walletTracking <span class="token operator">=</span> <span class="token string">'walletTracking'</span><span class="token punctuation">,</span>
  authenticationPopUpClosed <span class="token operator">=</span> <span class="token string">'authenticationPopUpClosed'</span><span class="token punctuation">,</span>
  transactionReplaced <span class="token operator">=</span> <span class="token string">'transactionReplaced'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All the examples of code here will use the <code>on</code> but in all of these cases, you can also use <code>once</code> if you require one-off listening functionality.</p> <h2 id="restoreauthenticationcompleted"><a href="#restoreauthenticationcompleted" class="header-anchor">#</a> restoreAuthenticationCompleted</h2> <p>To allow restoring someone to be logged in after they refresh on initial load the Wallet tries to restore a session. Upon success, it will emit <code>restoreAuthenticationCompleted</code> telling you if it's restored a user's session or not. You should disable any sign-in/up click button until you get this event (it should happen very fast).</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  RestoreAuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>RestoreAuthenticationCompletedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>restoreAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> RestoreAuthenticationCompletedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>restoreAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isAuthenticated<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="changenetwork"><a href="#changenetwork" class="header-anchor">#</a> changeNetwork</h2> <p>This will fire when the Wallet network has been changed. <em>Note: this will always fire upon initial authentication of the leader as networks will update as a result of authentication.</em></p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ChangeNetworkResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ChangeNetworkResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>changeNetwork<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ChangeNetworkResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>changeNetwork<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  network<span class="token operator">:</span> NetworkDetails<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>NetworkDetails</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  id<span class="token operator">:</span> Networks<span class="token punctuation">;</span>
  providerUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  enabled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Networks</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">enum</span> Networks <span class="token punctuation">{</span>
  mainnet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  ropsten <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  rinkeby <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kovan <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
  xdai <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
  novichok <span class="token operator">=</span> <span class="token number">1984</span><span class="token punctuation">,</span>
  bracknell <span class="token operator">=</span> <span class="token number">1999</span><span class="token punctuation">,</span>
  <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="authenticationcompleted"><a href="#authenticationcompleted" class="header-anchor">#</a> authenticationCompleted</h2> <p>This will fire when the leader instance has been authenticated by a user. Once (and not until) this event has been received, you can go ahead and inject follower instances to show the UI to the authenticated user.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  AuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>AuthenticationCompletedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>authenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> AuthenticationCompletedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>authenticationCompleted<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token comment">// can just be ignored if your dapp does not care about player protection</span>
  playerProtection<span class="token operator">:</span> ExclusionStatusResponse<span class="token punctuation">;</span>
  ethereumAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  currentCurrency<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  currentNetwork<span class="token operator">:</span> NetworkDetails<span class="token punctuation">;</span>
  <span class="token comment">// the fun wallets id for this user</span>
  userAccountId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ExclusionStatusResponse</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    status<span class="token operator">:</span> ExclusionStatusType<span class="token punctuation">;</span>
    startTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    durationDays<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    activeTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ExclusionStatusType</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">enum</span> ExclusionStatusType <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span> <span class="token operator">=</span> <span class="token string">'ACTIVE'</span><span class="token punctuation">,</span>
  <span class="token constant">ON_BREAK</span> <span class="token operator">=</span> <span class="token string">'ON_BREAK'</span><span class="token punctuation">,</span>
  <span class="token constant">EXCLUDED</span> <span class="token operator">=</span> <span class="token string">'EXCLUDED'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>NetworkDetails</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  id<span class="token operator">:</span> Networks<span class="token punctuation">;</span>
  providerUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  enabled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Networks</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">enum</span> Networks <span class="token punctuation">{</span>
  mainnet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  ropsten <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
  rinkeby <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  kovan <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span>
  xdai <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
  novichok <span class="token operator">=</span> <span class="token number">1984</span><span class="token punctuation">,</span>
  bracknell <span class="token operator">=</span> <span class="token number">1999</span><span class="token punctuation">,</span>
  <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="followerauthenticationcompleted"><a href="#followerauthenticationcompleted" class="header-anchor">#</a> followerAuthenticationCompleted</h2> <p>This will fire when the follower instance has authenticated itself successfully and indicates that you should re-enable any disabled Wallet buttons.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  FollowerAuthenticationCompletedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>FollowerAuthenticationCompletedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>followerAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> FollowerAuthenticationCompletedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>followerAuthenticationCompleted<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  followerAuthenticationCompleted<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="walletinactivityloggedout"><a href="#walletinactivityloggedout" class="header-anchor">#</a> walletInactivityLoggedOut</h2> <p>This will fire when the inactivity timeout has expired, meaning all authenticated instances have now been logged out.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletInactivityLoggedOutResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>WalletInactivityLoggedOutResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletInactivityLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> WalletInactivityLoggedOutResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletInactivityLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  loggedOut<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="walletdevicedeletedloggedout"><a href="#walletdevicedeletedloggedout" class="header-anchor">#</a> walletDeviceDeletedLoggedOut</h2> <p>This will fire when the current device the user is using has been deleted, meaning all authenticated instances have now been logged out.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletInactivityLoggedOutResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>WalletDeviceDeletedLoggedOutResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletDeviceDeletedLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> WalletDeviceDeletedLoggedOutResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletDeviceDeletedLoggedOut<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  loggedOut<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="pendingtransaction"><a href="#pendingtransaction" class="header-anchor">#</a> pendingTransaction</h2> <p>This will fire when a pending transaction has occurred on the Wallet. We suggest if your dApp has sent this transaction and wants to hook onto certain notifications, e.g. the transaction hash, receipt etc just use the framework your using to get that data (ethers/web3).</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  PendingTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>PendingTransactionResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>pendingTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> PendingTransactionResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>pendingTransaction<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  transaction<span class="token operator">:</span> <span class="token punctuation">{</span>
    to<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">from</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nonce<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    gasLimit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    gasPrice<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    chainId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="completedtransaction"><a href="#completedtransaction" class="header-anchor">#</a> completedTransaction</h2> <p>This will fire when a completed transaction has occurred on the Wallet (i.e. upon the first confirmation). We suggest if your dApp has sent this transaction and wants to hook onto certain notifications, e.g. the transaction hash, receipt etc just use the framework your using to get that data (ethers/web3).</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  CompletedTransactionResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>CompletedTransactionResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>completedTransaction<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> CompletedTransactionResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>completedTransaction<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  transactionReceipt<span class="token operator">:</span> <span class="token punctuation">{</span>
    to<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">from</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    contractAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    transactionIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    root<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    gasUsed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    logsBloom<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    blockHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    logs<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
      blockNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
      blockHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      transactionIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
      removed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
      address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      topics<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
      transactionHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      logIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    blockNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    confirmations<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    cumulativeGasUsed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    byzantium<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    status<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  blockTimestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="transactionreplaced"><a href="#transactionreplaced" class="header-anchor">#</a> transactionReplaced</h2> <p>This will fire when the user cancels the transaction or speeds it up within the wallet itself. Most wallets do not handle this meaning your dapp polls forever but if it happens when using the funwallet we will throw an error if your waiting for the receipt, also we will emit this event which tells you the <code>oldHash</code> the <code>newHash</code> and the reason it got replaced allowing you to link the old transaction to the new one without having to monitor events.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  TransactionReplacedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>TransactionReplacedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>transactionReplaced<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> TransactionReplacedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>transactionReplaced<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  oldHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  newHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  replacedReason<span class="token operator">:</span> <span class="token string">'gasIncreased'</span> <span class="token operator">|</span> <span class="token string">'cancelled'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="erc20tokenbalancechanged"><a href="#erc20tokenbalancechanged" class="header-anchor">#</a> erc20TokenBalanceChanged</h2> <p>This will fire when an ERC20 token balance changes for the authenticated user.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ERC20TokenBalanceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ERC20TokenBalanceChangedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>erc20TokenBalanceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ERC20TokenBalanceChangedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>erc20TokenBalanceChanged<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  contractAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  networkId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// the balance is pre-formatted</span>
  <span class="token comment">// to the correct maximum decimal</span>
  tokenBalance<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  tokenIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="erc20tokenfiatpricechanged"><a href="#erc20tokenfiatpricechanged" class="header-anchor">#</a> erc20TokenFiatPriceChanged</h2> <p>This will fire when an ERC20 token's fiat price changes. Fiat prices are monitored by the wallet server and updated regularly. Any change will trigger this event.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ERC20FiatPriceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ERC20FiatPriceChangedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>erc20TokenFiatPriceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ERC20FiatPriceChangedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>erc20TokenFiatPriceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  contractAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  networkId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  fiatPrice<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  tokenIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="ethbalancechanged"><a href="#ethbalancechanged" class="header-anchor">#</a> ethBalanceChanged</h2> <p>This will fire when the ETH balance changes for the authenticated user.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ETHBalanceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ETHBalanceChangedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>ethBalanceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ETHBalanceChangedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>ethBalanceChanged<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token comment">// the ethBalance is pre-formatted</span>
  <span class="token comment">// to the correct maximum decimal</span>
  ethBalance<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="ethfiatpricechanged"><a href="#ethfiatpricechanged" class="header-anchor">#</a> ethFiatPriceChanged</h2> <p>This will fire when the ETH fiat price changes. Fiat prices are monitored by the Wallet server and updated regularly. Any change will trigger this event.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ETHFiatPriceChangedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ETHFiatPriceChangedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>ethFiatPriceChanged<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ETHFiatPriceChangedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>ethFiatPriceChanged<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  fiatPrice<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="changecurrency"><a href="#changecurrency" class="header-anchor">#</a> changeCurrency</h2> <p>This will fire when the authenticated user's selected currency has changed.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  ChangeCurrencyResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>ChangeCurrencyResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>changeCurrency<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> ChangeCurrencyResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>changeCurrency<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  currency<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="iskycverified"><a href="#iskycverified" class="header-anchor">#</a> isKycVerified</h2> <p>This will fire upon initial login, whether the account is KYC-verified or not. This allows you to pop up the KYC modal automatically when a user logs in, if necessary.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  IsRegisteredThirdPartySignerResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>IsKycVerifiedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>isKycVerified<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> IsKycVerifiedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>isVerified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">showFunWalletModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// maybe show some kind of error message as in theory</span>
        <span class="token comment">// your client should not be showing ability to popup KYC</span>
        <span class="token comment">// when they are already verified</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">'Your client should not show the kyc logic if already kyced'</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>isKycVerified<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>isVerified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">showFunWalletModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// maybe show some kind of error message as in theory</span>
      <span class="token comment">// your client should not be showing ability to popup KYC</span>
      <span class="token comment">// when they are already verified</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">'Your client should not show the kyc logic if already kyced'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isVerified<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="kycprocesscancelled"><a href="#kycprocesscancelled" class="header-anchor">#</a> kycProcessCancelled</h2> <p>This will fire when the authenticated account going through the KYC process cancels the modal and goes back to the dApp website.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  IsRegisteredThirdPartySignerResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>KycProcessCancelledResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>kycProcessCancelled<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> KycProcessCancelledResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>cancelled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">hideFunWalletModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// you may want to move routes etc here hence why you hook onto this action</span>
        <span class="token comment">// and the sdk does not</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>kycProcessCancelled<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>cancelled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">hideFunWalletModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// you may want to move routes etc here hence why you hook onto this action</span>
      <span class="token comment">// and the sdk does not</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  cancelled<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="websocketconnected"><a href="#websocketconnected" class="header-anchor">#</a> websocketConnected</h2> <p>This will fire when a successful WebSocket connection is made, including any time a dApp reconnects after being disconnected. Please keep the WebSocket connected status in memory, and when <code>websocketDisconnected</code> is received, update the value of the WebSocket connection status.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WebsocketConnectedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>WebsocketConnectedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>websocketConnected<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> WebsocketConnectedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>websocketConnected<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  connected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="websocketdisconnected"><a href="#websocketdisconnected" class="header-anchor">#</a> websocketDisconnected</h2> <p>This will fire when the WebSocket disconnects or gets closed.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WebsocketDisconnectedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>WebsocketDisconnectedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>websocketDisconnected<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> WebsocketDisconnectedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>websocketDisconnected<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  disconnected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="newblock"><a href="#newblock" class="header-anchor">#</a> newBlock</h2> <p>This will fire when the wallet receives a new block alert through the WebSocket connection. This removes the need for any polling - the dApp can just listen for these events. You can hook onto this even if the user is not authenticated.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners<span class="token punctuation">,</span> NewBlockResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>NewBlockResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>newBlock<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> NewBlockResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>newBlock<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  networkId<span class="token operator">:</span> Networks<span class="token punctuation">;</span>
  blockNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  blockHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  bloomFilter<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="playerprotectionupdated"><a href="#playerprotectionupdated" class="header-anchor">#</a> playerProtectionUpdated</h2> <p>This will fire when the player protection data has been updated, for example if they have self-excluded or changed their exclusion reactivation date.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  PlayerProtectionUpdatedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>PlayerProtectionUpdatedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>playerProtectionUpdated<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> PlayerProtectionUpdatedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>playerProtectionUpdated<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  status<span class="token operator">:</span> ExclusionStatusType<span class="token punctuation">;</span>
  startTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  durationDays<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  activeTimestamp<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ExclusionStatusType</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">enum</span> ExclusionStatusType <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span> <span class="token operator">=</span> <span class="token string">'ACTIVE'</span><span class="token punctuation">,</span>
  <span class="token constant">ON_BREAK</span> <span class="token operator">=</span> <span class="token string">'ON_BREAK'</span><span class="token punctuation">,</span>
  <span class="token constant">EXCLUDED</span> <span class="token operator">=</span> <span class="token string">'EXCLUDED'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="wallettracking"><a href="#wallettracking" class="header-anchor">#</a> walletTracking</h2> <p>Due to the Wallet holding private keys in memory, we don't allow Google analytics scripts in the Wallet itself. However, this event emits tracking data back to the client so the you can pass them to any tracking software you want to use.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  WalletTrackingResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>WalletTrackingResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>walletTracking<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> WalletTrackingResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MessageListeners<span class="token punctuation">.</span>walletTracking<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    eventCategory<span class="token operator">:</span> TrackingEventCategory<span class="token punctuation">;</span>
    eventAction<span class="token operator">:</span> TrackingEventAction<span class="token punctuation">;</span>
    eventLabel<span class="token operator">?</span><span class="token operator">:</span> TrackingEventLabel <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    eventValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventCategory <span class="token punctuation">{</span>
  walletRegistration <span class="token operator">=</span> <span class="token string">'walletRegistration'</span><span class="token punctuation">,</span>
  walletRecovery <span class="token operator">=</span> <span class="token string">'walletRecovery'</span><span class="token punctuation">,</span>
  wallet <span class="token operator">=</span> <span class="token string">'wallet'</span><span class="token punctuation">,</span>
  accountDeposit <span class="token operator">=</span> <span class="token string">'accountDeposit'</span><span class="token punctuation">,</span>
  accountWithdrawal <span class="token operator">=</span> <span class="token string">'accountWithdrawal'</span><span class="token punctuation">,</span>
  accountTokenTransfers <span class="token operator">=</span> <span class="token string">'accountTokenTransfers'</span><span class="token punctuation">,</span>
  accountTransactions <span class="token operator">=</span> <span class="token string">'accountTransactions'</span><span class="token punctuation">,</span>
  accountSettings <span class="token operator">=</span> <span class="token string">'accountSettings'</span><span class="token punctuation">,</span>
  accountSecurity <span class="token operator">=</span> <span class="token string">'accountSecurity'</span><span class="token punctuation">,</span>
  accountResponsibleGaming <span class="token operator">=</span> <span class="token string">'accountResponsibleGaming'</span><span class="token punctuation">,</span>
  approveTransaction <span class="token operator">=</span> <span class="token string">'approveTransaction'</span><span class="token punctuation">,</span>
  approveSigningText <span class="token operator">=</span> <span class="token string">'approveSigningText'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventAction <span class="token punctuation">{</span>
  step <span class="token operator">=</span> <span class="token string">'step'</span><span class="token punctuation">,</span>
  click <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> TrackingEventLabel <span class="token punctuation">{</span>
  emailValidatingRequest <span class="token operator">=</span> <span class="token string">'emailValidatingRequest'</span><span class="token punctuation">,</span>
  resendEmail <span class="token operator">=</span> <span class="token string">'resendEmail'</span><span class="token punctuation">,</span>
  emailValidationComplete <span class="token operator">=</span> <span class="token string">'emailValidationComplete'</span><span class="token punctuation">,</span>
  backToSignIn <span class="token operator">=</span> <span class="token string">'backToSignIn'</span><span class="token punctuation">,</span>
  emailValidationFailed <span class="token operator">=</span> <span class="token string">'emailValidationFailed'</span><span class="token punctuation">,</span>
  closeAndReturnToApp <span class="token operator">=</span> <span class="token string">'closeAndReturnToApp'</span><span class="token punctuation">,</span>
  passwordSetup <span class="token operator">=</span> <span class="token string">'passwordSetup'</span><span class="token punctuation">,</span>
  registrationComplete <span class="token operator">=</span> <span class="token string">'registrationComplete'</span><span class="token punctuation">,</span>
  startKyc <span class="token operator">=</span> <span class="token string">'startKyc'</span><span class="token punctuation">,</span>
  closeKyc <span class="token operator">=</span> <span class="token string">'closeKyc'</span><span class="token punctuation">,</span>
  verifyMyId <span class="token operator">=</span> <span class="token string">'verifyMyId'</span><span class="token punctuation">,</span>
  selectCountry <span class="token operator">=</span> <span class="token string">'selectCountry'</span><span class="token punctuation">,</span>
  kycLoaded <span class="token operator">=</span> <span class="token string">'kycLoaded'</span><span class="token punctuation">,</span>
  kycCompleted <span class="token operator">=</span> <span class="token string">'kycCompleted'</span><span class="token punctuation">,</span>
  kycFailed <span class="token operator">=</span> <span class="token string">'kycFailed'</span><span class="token punctuation">,</span>
  kycFallbackLoaded <span class="token operator">=</span> <span class="token string">'kycFallbackLoaded'</span><span class="token punctuation">,</span>
  recoveryRequest <span class="token operator">=</span> <span class="token string">'recoveryRequest'</span><span class="token punctuation">,</span>
  noRecoveryPossible <span class="token operator">=</span> <span class="token string">'noRecoveryPossible'</span><span class="token punctuation">,</span>
  recoveryEmailSent <span class="token operator">=</span> <span class="token string">'recoveryEmailSent'</span><span class="token punctuation">,</span>
  recoveryEmailValidated <span class="token operator">=</span> <span class="token string">'recoveryEmailValidated'</span><span class="token punctuation">,</span>
  recoveryComplete <span class="token operator">=</span> <span class="token string">'recoveryComplete'</span><span class="token punctuation">,</span>
  createAccount <span class="token operator">=</span> <span class="token string">'createAccount'</span><span class="token punctuation">,</span>
  signIn <span class="token operator">=</span> <span class="token string">'signIn'</span><span class="token punctuation">,</span>
  signInFailed <span class="token operator">=</span> <span class="token string">'signInFailed'</span><span class="token punctuation">,</span>
  signInCompleted <span class="token operator">=</span> <span class="token string">'signInCompleted'</span><span class="token punctuation">,</span>
  forgotPassword <span class="token operator">=</span> <span class="token string">'forgotPassword'</span><span class="token punctuation">,</span>
  deposit <span class="token operator">=</span> <span class="token string">'deposit'</span><span class="token punctuation">,</span>
  ethOrFun <span class="token operator">=</span> <span class="token string">'ethOrFun'</span><span class="token punctuation">,</span>
  copyAddress <span class="token operator">=</span> <span class="token string">'copyAddress'</span><span class="token punctuation">,</span>
  coinSwap <span class="token operator">=</span> <span class="token string">'coinSwap'</span><span class="token punctuation">,</span>
  createdCoinSwap <span class="token operator">=</span> <span class="token string">'createdCoinSwap'</span><span class="token punctuation">,</span>
  withdrawal <span class="token operator">=</span> <span class="token string">'withdrawal'</span><span class="token punctuation">,</span>
  withdrawalMax <span class="token operator">=</span> <span class="token string">'withdrawalMax'</span><span class="token punctuation">,</span>
  withdrawalAdvanced <span class="token operator">=</span> <span class="token string">'widhtrawalAdvanced'</span><span class="token punctuation">,</span>
  withdrawalChangeGasPrice <span class="token operator">=</span> <span class="token string">'withdrawalChangeGasPrice'</span><span class="token punctuation">,</span>
  withdrawalClick <span class="token operator">=</span> <span class="token string">'withdrawalClick'</span><span class="token punctuation">,</span>
  withdrawalCompleted <span class="token operator">=</span> <span class="token string">'withdrawalCompleted'</span><span class="token punctuation">,</span>
  withdrawalFailed <span class="token operator">=</span> <span class="token string">'withdrawalFailed'</span><span class="token punctuation">,</span>
  withdrawalCancelled <span class="token operator">=</span> <span class="token string">'withdrawalCancelled'</span><span class="token punctuation">,</span>
  tokenTransfers <span class="token operator">=</span> <span class="token string">'tokenTransfers'</span><span class="token punctuation">,</span>
  tokenTransfersNext <span class="token operator">=</span> <span class="token string">'tokenTransfersNext'</span><span class="token punctuation">,</span>
  tokenTransfersPrevious <span class="token operator">=</span> <span class="token string">'tokenTransfersPrevious'</span><span class="token punctuation">,</span>
  transactions <span class="token operator">=</span> <span class="token string">'transactions'</span><span class="token punctuation">,</span>
  transactoinViewMoreInfo <span class="token operator">=</span> <span class="token string">'transactoinViewMoreInfo'</span><span class="token punctuation">,</span>
  transactionGoToEtherscan <span class="token operator">=</span> <span class="token string">'transactionGoToEtherscan'</span><span class="token punctuation">,</span>
  transactionSpeedUp <span class="token operator">=</span> <span class="token string">'transactionSpeedUp'</span><span class="token punctuation">,</span>
  transactionCancel <span class="token operator">=</span> <span class="token string">'transactionCancel'</span><span class="token punctuation">,</span>
  transactionsNext <span class="token operator">=</span> <span class="token string">'transactionsNext'</span><span class="token punctuation">,</span>
  transactionsPrevious <span class="token operator">=</span> <span class="token string">'transactionsPrevious'</span><span class="token punctuation">,</span>
  accountSettings <span class="token operator">=</span> <span class="token string">'accountSettings'</span><span class="token punctuation">,</span>
  networkChange <span class="token operator">=</span> <span class="token string">'networkChange'</span><span class="token punctuation">,</span>
  currencyChange <span class="token operator">=</span> <span class="token string">'currencyChange'</span><span class="token punctuation">,</span>
  signerChange <span class="token operator">=</span> <span class="token string">'signerChange'</span><span class="token punctuation">,</span>
  exportWallet <span class="token operator">=</span> <span class="token string">'exportWallet'</span><span class="token punctuation">,</span>
  accountSecurity <span class="token operator">=</span> <span class="token string">'accountSecurity'</span><span class="token punctuation">,</span>
  changeEmail <span class="token operator">=</span> <span class="token string">'changeEmail'</span><span class="token punctuation">,</span>
  changeEmailcompleted <span class="token operator">=</span> <span class="token string">'changeEmailcompleted'</span><span class="token punctuation">,</span>
  changePassword <span class="token operator">=</span> <span class="token string">'changePassword'</span><span class="token punctuation">,</span>
  changePasswordCompleted <span class="token operator">=</span> <span class="token string">'changePasswordCompleted'</span><span class="token punctuation">,</span>
  secondaryEmail <span class="token operator">=</span> <span class="token string">'secondaryEmail'</span><span class="token punctuation">,</span>
  secondaryEmailCompleted <span class="token operator">=</span> <span class="token string">'secondaryEmailCompleted'</span><span class="token punctuation">,</span>
  secondaryEmailDeleted <span class="token operator">=</span> <span class="token string">'secondaryEmailDeleted'</span><span class="token punctuation">,</span>
  twoFactorAuthentication <span class="token operator">=</span> <span class="token string">'twoFactorAuthentication'</span><span class="token punctuation">,</span>
  twoFactorAuthenticationEnabled <span class="token operator">=</span> <span class="token string">'twoFactorAuthenticationEnabled'</span><span class="token punctuation">,</span>
  twoFactorAuthenticationDisabled <span class="token operator">=</span> <span class="token string">'twoFactorAuthenticationDisabled'</span><span class="token punctuation">,</span>
  deviceActivity <span class="token operator">=</span> <span class="token string">'deviceActivity'</span><span class="token punctuation">,</span>
  deviceDeleted <span class="token operator">=</span> <span class="token string">'deviceDeleted'</span><span class="token punctuation">,</span>
  thirdPartySigners <span class="token operator">=</span> <span class="token string">'thirdPartySigners'</span><span class="token punctuation">,</span>
  thirdPartyAddSigner <span class="token operator">=</span> <span class="token string">'thirdPartyAddSigner'</span><span class="token punctuation">,</span>
  thirdPartyAddSignerCompleted <span class="token operator">=</span> <span class="token string">'thirdPartyAddSignerCompleted'</span><span class="token punctuation">,</span>
  thirdPartyAddSignerFailed <span class="token operator">=</span> <span class="token string">'thirdPartyAddSignerFailed'</span><span class="token punctuation">,</span>
  responsibleGaming <span class="token operator">=</span> <span class="token string">'responsibleGaming'</span><span class="token punctuation">,</span>
  takeABreak <span class="token operator">=</span> <span class="token string">'takeABreak'</span><span class="token punctuation">,</span>
  takeABreakClick <span class="token operator">=</span> <span class="token string">'takeABreakClick'</span><span class="token punctuation">,</span>
  takeABreakCompleted <span class="token operator">=</span> <span class="token string">'takeABreakCompleted'</span><span class="token punctuation">,</span>
  takeABreakCancelled <span class="token operator">=</span> <span class="token string">'takeABreakCancelled'</span><span class="token punctuation">,</span>
  extendBreak <span class="token operator">=</span> <span class="token string">'extendBreak'</span><span class="token punctuation">,</span>
  extendBreakClick <span class="token operator">=</span> <span class="token string">'extendBreakClick'</span><span class="token punctuation">,</span>
  extendBreakCompleted <span class="token operator">=</span> <span class="token string">'extendBreakCompleted'</span><span class="token punctuation">,</span>
  extendBreakFailed <span class="token operator">=</span> <span class="token string">'extendBreakFailed'</span><span class="token punctuation">,</span>
  extendBreakCancelled <span class="token operator">=</span> <span class="token string">'extendBreakCancelled'</span><span class="token punctuation">,</span>
  selfExcluse <span class="token operator">=</span> <span class="token string">'selfExcluse'</span><span class="token punctuation">,</span>
  selfExcluseCompleted <span class="token operator">=</span> <span class="token string">'selfExcluseCompleted'</span><span class="token punctuation">,</span>
  selfExcluseCancelled <span class="token operator">=</span> <span class="token string">'selfExcluseCancelled'</span><span class="token punctuation">,</span>
  reactivateAccountModal <span class="token operator">=</span> <span class="token string">'reactivateAccountModal'</span><span class="token punctuation">,</span>
  reactivateAccount <span class="token operator">=</span> <span class="token string">'reactivateAccount'</span><span class="token punctuation">,</span>
  approveTransaction <span class="token operator">=</span> <span class="token string">'approveTransaction'</span><span class="token punctuation">,</span>
  approveTransactionAdvanced <span class="token operator">=</span> <span class="token string">'approveTransactionAdvanced'</span><span class="token punctuation">,</span>
  approveTransactionApproved <span class="token operator">=</span> <span class="token string">'approveTransactionApproved'</span><span class="token punctuation">,</span>
  approveTransactionRejected <span class="token operator">=</span> <span class="token string">'approveTransactionRejected'</span><span class="token punctuation">,</span>
  approveSigningText <span class="token operator">=</span> <span class="token string">'approveSigningText'</span><span class="token punctuation">,</span>
  approveSigningTextApproved <span class="token operator">=</span> <span class="token string">'approveSigningTextApproved'</span><span class="token punctuation">,</span>
  approveSigningTextRejected <span class="token operator">=</span> <span class="token string">'approveSigningTextRejected'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="authenticationpopupclosed"><a href="#authenticationpopupclosed" class="header-anchor">#</a> authenticationPopUpClosed</h2> <p>This emits an event when the authentication popup is closed. If <code>isAuthenticated</code> in the response is true, it means the close happened after a successful login; if it's false it means the user didn't go through the whole login process (for example, if they closed the popup).</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  AuthenticationPopUpClosedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>AuthenticationPopUpClosedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>authenticationPopUpClosed<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> AuthenticationPopUpClosedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>authenticationPopUpClosed<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p><code>result.data</code> returns:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  isAuthenticated<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="cancelling-event-listeners"><a href="#cancelling-event-listeners" class="header-anchor">#</a> Cancelling event listeners</h2> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  TStronglyTypedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p>This works the same as <code>once</code>:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="typescript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk/window'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MessageListeners<span class="token punctuation">,</span>
  TStronglyTypedResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> window<span class="token punctuation">.</span>funwallet<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">once</span><span class="token generic class-name"><span class="token operator">&lt;</span>TStronglyTypedResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>result<span class="token operator">:</span> TStronglyTypedResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section> <section aria-hidden="true" id="javascript" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MessageListeners <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@funfair-tech/wallet-sdk'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listener <span class="token operator">=</span> funwalletsdk<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>
  MessageListeners<span class="token punctuation">.</span>TypeYouWantToUse<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>origin <span class="token operator">===</span> <span class="token string">'https://wallet.funfair.io/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancel</span>
listener<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></section></div></div> <p>Now if you try to listen to that message listener again it will work, as you have cancelled the other listener. On the <code>once</code> calls, once the <code>once</code> has been fired you will be able to register a new listener without an error being thrown.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/funfair-tech/fun-wallet-docs/edit/master/packages/docs/dist/guide/web-sdk/sdk-event-listeners.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/23/2020, 4:22:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/fun-wallet-docs/guide/web-sdk/sdk-methods/version-info.html" class="prev">
        SDK Methods Version Info
      </a></span> <span class="next"><a href="/fun-wallet-docs/guide/web-sdk/block-listener.html">
        Block listener
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/fun-wallet-docs/assets/js/app.927459d6.js" defer></script><script src="/fun-wallet-docs/assets/js/2.7b9da207.js" defer></script><script src="/fun-wallet-docs/assets/js/42.25a76a54.js" defer></script><script src="/fun-wallet-docs/assets/js/5.ecad0ec5.js" defer></script>
  </body>
</html>
