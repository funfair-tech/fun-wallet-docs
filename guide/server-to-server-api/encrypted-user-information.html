<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Encrypted user information | FunFair Wallet Documentation</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/fun-wallet-docs/logo.svg">
    <link rel="manifest" href="/fun-wallet-docs/manifest.json">
    <link rel="apple-touch-icon" href="/fun-wallet-docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/fun-wallet-docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Welcome">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/fun-wallet-docs/assets/css/0.styles.d2ddfb65.css" as="style"><link rel="preload" href="/fun-wallet-docs/assets/js/app.5f19a79c.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/2.a0d94ea1.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/30.9aab8618.js" as="script"><link rel="preload" href="/fun-wallet-docs/assets/js/5.c35ce4c3.js" as="script"><link rel="prefetch" href="/fun-wallet-docs/assets/js/10.d682e561.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/11.ca85f405.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/12.e46e5a2a.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/13.c68f3bf1.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/14.d854c661.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/15.f30583d8.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/16.ec4b8e77.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/17.31b904e4.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/18.e3118307.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/19.4ed76072.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/20.385e42b6.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/21.5fed1a42.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/22.469eb599.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/23.2f0ac2f1.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/24.461c3fbe.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/25.21067a62.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/26.ce8b61c3.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/27.8243fb9b.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/28.9c685a55.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/29.a83728fd.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/3.93480ce7.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/31.fd10623f.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/32.b6c62458.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/33.9377b8fa.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/34.963a2350.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/35.f12b2500.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/36.8d13854d.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/37.eff79142.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/38.4ae19338.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/39.afef5a36.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/4.e3251b57.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/40.4f1b91fb.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/41.1e5fcdda.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/42.b9fb4d3d.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/43.f98b96ce.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/44.b673b3ee.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/45.aca79237.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/46.6ea406df.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/6.fddb07c3.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/7.cf304ae3.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/8.472fca48.js"><link rel="prefetch" href="/fun-wallet-docs/assets/js/9.d0806942.js">
    <link rel="stylesheet" href="/fun-wallet-docs/assets/css/0.styles.d2ddfb65.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fun-wallet-docs/" class="home-link router-link-active"><img src="/fun-wallet-docs/logo.svg" alt="FunFair Wallet Documentation" class="logo"> <span class="site-name can-hide">FunFair Wallet Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fun-wallet-docs/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fun-wallet-docs/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/funfair-tech/fun-wallet-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Information</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/fun-wallet-docs/guide/information/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/fun-wallet-docs/guide/information/browser-support.html" class="sidebar-link">Browser Support</a></li><li><a href="/fun-wallet-docs/guide/information/testing.html" class="sidebar-link">Our Testing</a></li><li><a href="/fun-wallet-docs/guide/information/layouts.html" class="sidebar-link">Layouts</a></li><li><a href="/fun-wallet-docs/guide/information/branding.html" class="sidebar-link">Branding</a></li><li><a href="/fun-wallet-docs/guide/information/kyc.html" class="sidebar-link">KYC</a></li><li><a href="/fun-wallet-docs/guide/information/fiat-gateway.html" class="sidebar-link">Fiat Gateway</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>How Does It Work?</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-authentication-works.html" class="sidebar-link">How Authentication Works</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/registration.html" class="sidebar-link">Registration</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/login-and-recovery-token-generation.html" class="sidebar-link">Login and Recovery Token Generation</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/recovery.html" class="sidebar-link">Recovery</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/re-authentication.html" class="sidebar-link">Re-authentication</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-is-the-authentication-secure.html" class="sidebar-link">How is the Authentication Secure?</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-popup-authenticates-leader.html" class="sidebar-link">How the Authenticated Popup Authenticates the Leader</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/leader-and-follower-communication.html" class="sidebar-link">Leader and Follower Communication</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/how-broadcast-works.html" class="sidebar-link">How Broadcast Works</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/fun-wallet-sdk.html" class="sidebar-link">FunFair Wallet SDK</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/fun-wallet-ethereum-provider.html" class="sidebar-link">FunFair Wallet Ethereum Provider</a></li><li><a href="/fun-wallet-docs/guide/how-does-it-work/blooms.html" class="sidebar-link">Blooms</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Web SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/web-sdk/installing-sdk.html" class="sidebar-link">Installing the FunFair Wallet SDK</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/setting-up-the-sdk-with-project.html" class="sidebar-link">Setting Up the SDK in Your Project</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/initialising-the-sdk.html" class="sidebar-link">Initialising the SDK</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/wallet-ui.html" class="sidebar-link">Show Wallet UI</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/routing.html" class="sidebar-link">Routing and Deep Linking</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/languages.html" class="sidebar-link">Languages</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/approval-modal.html" class="sidebar-link">Approval Modals</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/ethereum-provider.html" class="sidebar-link">Ethereum Provider</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-methods.html" class="sidebar-link">SDK Methods</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/sdk-event-listeners.html" class="sidebar-link">SDK Event Listeners</a></li><li><a href="/fun-wallet-docs/guide/web-sdk/block-listener.html" class="sidebar-link">Block listener</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Server &gt; Server API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fun-wallet-docs/guide/server-to-server-api/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/user-information.html" class="sidebar-link">User information</a></li><li><a href="/fun-wallet-docs/guide/server-to-server-api/encrypted-user-information.html" aria-current="page" class="active sidebar-link">Encrypted user information</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/server-to-server-api/encrypted-user-information.html#sample-request" class="sidebar-link">Sample request</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/server-to-server-api/encrypted-user-information.html#sample-response" class="sidebar-link">Sample response</a></li><li class="sidebar-sub-header"><a href="/fun-wallet-docs/guide/server-to-server-api/encrypted-user-information.html#decrypted-user-data" class="sidebar-link">Decrypted user data</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="encrypted-user-information"><a href="#encrypted-user-information" class="header-anchor">#</a> Encrypted user information</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">POST</span><span class="token operator">:</span> <span class="token operator">/</span>server<span class="token operator">/</span>encrypteduser<span class="token operator">?</span>yourAppAddress
</code></pre></div><p>This endpoint returns a user's name, date of birth and country code.</p> <p>For this endpoint, <em>information is encrypted in transit.</em> This works as follows:</p> <ol><li>Your server-side code generates an RSA key pair</li> <li>You provide the user address to be queried (which can be obtained from the 'addr' claim in a user's JWT), and the modulus and exponent of the public key that was generated by your code</li> <li>You sign the request as specified in <a href="/fun-wallet-docs/guide/server-to-server-api/authorization.html"> Authorization </a></li> <li>The response will contain an AES key, encrypted using the RSA components supplied in your request, an AES IV, and user data, encrypted using the AES key</li> <li>Use the private key from the RSA key pair that was previously generated in order to decrpyt the AES key</li> <li>Use the decrypted AES key to decrypt the user data</li></ol> <h2 id="sample-request"><a href="#sample-request" class="header-anchor">#</a> Sample request</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">POST</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">5010</span><span class="token operator">/</span>api<span class="token operator">/</span>server<span class="token operator">/</span>encrypteduser<span class="token operator">?</span>casinoAddress<span class="token operator">=</span><span class="token number">0x2D447Da24D7174e142D6708ca350CF43f12a5570</span> <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
Host<span class="token operator">:</span> localhost<span class="token operator">:</span><span class="token number">5010</span>
<span class="token constant">X</span><span class="token operator">-</span>App<span class="token operator">-</span>Signature<span class="token operator">:</span> <span class="token number">0xd31c8806f916f2179e9f2c838dd02280c1bae42808b113cc3ce56c10aa978777799090d309ef93b567be104c0e1798c6300e6f752a39271d09c86b68e00750c21c</span><span class="token number">.2020</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span>T09<span class="token operator">:</span><span class="token number">38</span><span class="token operator">:</span><span class="token number">29</span>Z <span class="token comment">// signature goes here</span>
Accept<span class="token operator">-</span>Encoding<span class="token operator">:</span> gzip<span class="token punctuation">,</span> deflate
Content<span class="token operator">-</span>Type<span class="token operator">:</span> application<span class="token operator">/</span>json<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
Content<span class="token operator">-</span>Length<span class="token operator">:</span> <span class="token number">377</span>
<span class="token punctuation">{</span><span class="token string">&quot;userAddress&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x19D491B3e5CdB5af04b4A9ADB1d521784CAB433f&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rsaPublicKeyModulus&quot;</span><span class="token operator">:</span><span class="token string">&quot;0xbcb5bfa7a4a58689151ed9ea9a17655f32c0ed560d6f0231976b3adf08d36375d9aa7cbbd11f067ee500ba62a12544c97d49883c3579de697406918eae2d7c91e1a0599e305d2374a4ed9313ad75d483e70234ca52926d227aec7d6986a335992ca2ed596adb6e11738d73bf68e2c6148ff5028f2330964d25b3cdda0fccdb1d&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rsaPublicKeyExponent&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x010001&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>The userAddress field should be populated with the Ethereum account address for the user you wish to retrieve information for. This can be retrieved from the 'addr' claim in the JWT used by the user.</p> <h2 id="sample-response"><a href="#sample-response" class="header-anchor">#</a> Sample response</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;aesKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x3e7f20d5414c654466011743126c1e5b5ab10a6e70ca57b98c0083a7bba02f794e5835804987431376555e01f61b501f6bcba64e161d0c9c4c56c1a39278653b30718f777d571ffd054909c88ac7d30a0a83ce9076457740c3ccfca9826e3a2c046bea8abe252206759574f308cd83ada92689a1f6ce3aba60e2d48a5e5e7881&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;aesIv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0xd8df0c110843ea95f2a329b3faa1dc69&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0x763f4f6dec5c348e6908f7788cc825271db607c2acfe59738e8b5ee525bf0a34a124c52cd71b3e925f75241cd0adbec43411051dde4a86a86963bb1bc2c5ad5da1346d8f570c0893c7602dbc667d2fb8&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="decrypted-user-data"><a href="#decrypted-user-data" class="header-anchor">#</a> Decrypted user data</h2> <p>Successful decryption of the 'data' value using the AES key (once it's been decrypted using your RSA private key) will result in JSON like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;FullName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Justin Bieber&quot;</span><span class="token punctuation">,</span>
	<span class="token string">&quot;DateOfBirth&quot;</span><span class="token operator">:</span> <span class="token number">6235156423</span><span class="token punctuation">,</span> <span class="token comment">// unix time</span>
	<span class="token string">&quot;CountryCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CAN&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/funfair-tech/fun-wallet-docs/edit/master/packages/docs/dist/guide/server-to-server-api/encrypted-user-information.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/4/2020, 10:26:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/fun-wallet-docs/guide/server-to-server-api/user-information.html" class="prev">
        User information
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/fun-wallet-docs/assets/js/app.5f19a79c.js" defer></script><script src="/fun-wallet-docs/assets/js/2.a0d94ea1.js" defer></script><script src="/fun-wallet-docs/assets/js/30.9aab8618.js" defer></script><script src="/fun-wallet-docs/assets/js/5.c35ce4c3.js" defer></script>
  </body>
</html>
